<lib name="jquery.ui" />
<lib name="jquery.ztree" />
<lib name="jquery.tip" />
<lib name='jquery.farbtastic'/>
<lib name='ckeditor'/>

<script src="mvc-merger:js/fselecter.js" />
<script src="mvc-merger:js/jquery.wijmo-open.all.2.1.4.min.js" />
<script src="mvc-merger:js/merge-pannel.js" />
<script src="mvc-merger:js/merge-pannel-layout.js" />

<css src="mvc-merger:css/merge-pannel.css" />
<css src="mvc-merger:css/jquery.wijmo-open.2.1.4.css" />

<div id='mergepannel-dialog'>
	<div id='mergepannel-layout' class="mvcmerger_pages">
		<div id='mergepannel-layout-views'>
			<!-- frame/view 属性面板 -->
			<div id="mergepannel-properties" style="display: none">
				<div>
					<h1 id="mergepannel-props-type-text"><span id="mergepannel-props-type">layout item type</span>设置 </h1>
					<hr />
				</div>
				<div id="mergepannel-props-properties-overflow">
					<span id="mergepannel-props-id"></span>
					<span id="mergepannel-props-frame-type"></span>
					<!-- 用于 frame -->
					<div id="mergepannel-props-frame" style="display: none;">
						<h2 id="mergepannel-props-id-text"> 控制子元素的样式 </h2>
						<div id="mergepannel-props-frame-type">
							类型： <label>
								<input id="mergepannel-props-frame-v"
								class="mergepannel-props-frame-type"
								name='mergepannel-props-frame-type' type="radio" value="v" />
								纵向 </label><label>
								<input id="mergepannel-props-frame-h"
								class="mergepannel-props-frame-type"
								name='mergepannel-props-frame-type' type="radio" value="h" />
								横向 </label><label>
								<input id="mergepannel-props-frame-s"
								class="mergepannel-props-frame-type"
								name='mergepannel-props-frame-type' type="radio" value="s"
								disabled />
								切换页 </label>
						</div>
						<div>
							<!-- 
							<button id="mergepannel-props-frame-clearwidth-btn" class="mergepannel-tippalbe-element" title='清除所有下级成员的宽度设置'>清除宽</button>
							<button id="mergepannel-props-frame-clearheight-btn" class="mergepannel-tippalbe-element" title='清除所有下级成员的高度设置'>清除高</button>
							<button id="mergepannel-props-frame-autoheight-btn" class="mergepannel-tippalbe-element" title='下级成员的高度一致'>等高</button>
							 -->
							<button id="mergepannel-props-frame-center-btn" class="mergepannel-tippalbe-element" title='让下级成员居中'>居中</button>
							<button id="mergepannel-props-frame-delete-btn" class="mergepannel-tippalbe-element" title='删除布局框架,只有客户创建的布局框架才能删除'>删</button>
							<button id="mergepannel-props-frame-new-btn" class="mergepannel-tippalbe-element" title='增加一个下级布局框架'>+添加下级框架</button>
						</div>
						<div>
							<label  class="mergepannel-tippalbe-element" title='把这个容器变成可填充容器,里面的子元素自动填充这个容器的空闲高度'>
								<input id="mergepannel-frame-autoFill"  type="checkbox"/>
								可自动填充容器
							</label>
						</div>
					</div>
					<!-- frame/view 通用属性 -->
					<hr />
					<div id="mergepannel-props-common">
					
						<h2 id="mergepannel-props-id-text"> 控制自身样式 </h2>
						
						<div>
							<dl>
								<dt><h3>样式:</h3></dt>
								<dd>
								选择样式<select id='mergepannel-props-skin' >
											<option value="">无</option>
											<option value="jc-view-decorater-oc">蜂巢默认样式</option>
										</select>
								<br/>
								
								<label>填写样式
									<input style="width: 160px" id="mergepannel-props-class"/>
								</label>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
						</div>
						
						<div id='mergepannel-props-css'>
						
							<dl>
								<dt><h3>显示:</h3></dt>
								<dd>
									<select id='mergepannel-props-display' >
										<option value="block">显示</option>
										<option value="none">隐藏</option>
									</select>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>宽高:</h3></dt>
								<dd>
								宽
								<input style="width: 50px" id="mergepannel-props-width" class="mergepannel-tippalbe-element" title="设置视图或布局框架的宽度,可以使用百分比或单位,默认的单位是px" />
								x 高
								<input style="width: 50px" id="mergepannel-props-height" class="mergepannel-tippalbe-element" title="设置视图或布局框架的高度,可以使用百分比或单位,默认的单位是px" />
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dd>
								<a id="mergepannel-showmore" class='mergepannel-showmore-left' href="#" title="更多设置"></a>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>背景:</h3></dt>
								<dd>
									颜色<input style="width: 80px" id="mergepannel-props-background-color" />
									<div id="mergepannel-props-color-selecter"></div>
									<br/>
									位置<input style="width: 100px" id="mergepannel-props-background-position" />
									<select id="mergepannel-props-background-repeat">
										<option value='no-repeat'>不重复</option>
										<option value='repeat'>重复</option>
										<option value='repeat-x'>横向重复</option>
										<option value='repeat-y'>纵向重复</option>
									</select><br/>
									图片地址<input style="width: 160px" id="mergepannel-props-background-image" />
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>位置:</h3></dt>
								<dd>
								位置模式<select id="mergepannel-props-position">
									<option value="static">正常</option>
									<option value="relative">相对</option>
									<option value="absolute">绝对</option>
									<option value="fixed">窗口绝对</option>
								</select>
								高度<input style="width: 33px" id="mergepannel-props-zindex" type="text"/>
								<br/>
								上
								<input style="width: 33px" id="mergepannel-props-top" type="text"/>
								左
								<input style="width: 33px" id="mergepannel-props-left" type="text"/>
								下
								<input style="width: 33px" id="mergepannel-props-bottom" type="text"/>
								右
								<input style="width: 33px" id="mergepannel-props-right" type="text"/>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>边框:</h3></dt>
								<dd>
								<a id="mergepannel-props-borders-showmore" href="#" title="详细设定" class="mergepannel-props-borders-arrow-left"></a>
								宽
								<input style="width: 30px" class="mergepannel-border" id="mergepannel-props-border-width" type="text"/>
								色
								<input style="width: 50px" class="mergepannel-border" id="mergepannel-props-border-color" type="text"/>
								样
								<select id="mergepannel-props-border-style" class="mergepannel-border" style='width:50px;display:inline;'>
									<option value="none">无</option>
									<option value="solid">实线</option>
									<option value="dotted">点状</option>
									<option value="dashed">虚线</option>
									<option value="double">双线</option>
									<option value="groove">3D 凹槽</option>
									<option value="ridge">3D 垄状</option>
									<option value="inset">3D 内部</option>
									<option value="outset">3D 外部</option>
								</select>
								<div id='mergepannel-props-borders'>
									<h3>上:</h3>
									宽
									<input style="width: 30px" class="mergepannel-border" id="mergepannel-props-border-top-width" type="text"/>
									色
									<input style="width: 50px" class="mergepannel-border" id="mergepannel-props-border-top-color" type="text"/>
									样
									<select id="mergepannel-props-border-top-style" class="mergepannel-border" style='width:50px;'>
										<option value="none">无</option>
										<option value="solid">实线</option>
										<option value="dotted">点状</option>
										<option value="dashed">虚线</option>
										<option value="double">双线</option>
										<option value="groove">3D 凹槽</option>
										<option value="ridge">3D 垄状</option>
										<option value="inset">3D 内部</option>
										<option value="outset">3D 外部</option>
									</select><br/>
									<h3>右:</h3>
									宽
									<input style="width: 30px" class="mergepannel-border" id="mergepannel-props-border-right-width" type="text"/>
									色
									<input style="width: 50px" class="mergepannel-border" id="mergepannel-props-border-right-color" type="text"/>
									样
									<select id="mergepannel-props-border-right-style" class="mergepannel-border" style='width:50px;'>
										<option value="none">无</option>
										<option value="solid">实线</option>
										<option value="dotted">点状</option>
										<option value="dashed">虚线</option>
										<option value="double">双线</option>
										<option value="groove">3D 凹槽</option>
										<option value="ridge">3D 垄状</option>
										<option value="inset">3D 内部</option>
										<option value="outset">3D 外部</option>
									</select><br/>
									<h3>下:</h3>
									宽
									<input style="width: 30px" class="mergepannel-border" id="mergepannel-props-border-bottom-width" type="text"/>
									色
									<input style="width: 50px" class="mergepannel-border" id="mergepannel-props-border-bottom-color" type="text"/>
									样
									<select id="mergepannel-props-border-bottom-style" class="mergepannel-border" style='width:50px;'>
										<option value="none">无</option>
										<option value="solid">实线</option>
										<option value="dotted">点状</option>
										<option value="dashed">虚线</option>
										<option value="double">双线</option>
										<option value="groove">3D 凹槽</option>
										<option value="ridge">3D 垄状</option>
										<option value="inset">3D 内部</option>
										<option value="outset">3D 外部</option>
									</select><br/>
									<h3>左:</h3>
									宽
									<input style="width: 30px" id="mergepannel-props-border-left-width" class="mergepannel-border" type="text"/>
									色
									<input style="width: 50px" id="mergepannel-props-border-left-color" class="mergepannel-border" type="text"/>
									样
									<select id="mergepannel-props-border-left-style" style='width:50px;'  class="mergepannel-border">
										<option value="none">无</option>
										<option value="solid">实线</option>
										<option value="dotted">点状</option>
										<option value="dashed">虚线</option>
										<option value="double">双线</option>
										<option value="groove">3D 凹槽</option>
										<option value="ridge">3D 垄状</option>
										<option value="inset">3D 内部</option>
										<option value="outset">3D 外部</option>
									</select>
								</div>
							</dd>
							<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>边距:</h3></dt>
								<dd>
								上<input style="width: 33px" id="mergepannel-props-margin-top" type="text"/>
								右<input style="width: 33px" id="mergepannel-props-margin-right" type="text"/>
								下<input style="width: 33px" id="mergepannel-props-margin-bottom" type="text"/>
								左<input style="width: 33px" id="mergepannel-props-margin-left" type="text"/>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt><h3>留白:</h3></dt>
								<dd>
								上<input style="width: 33px" id="mergepannel-props-padding-top" type="text"/>
								右<input style="width: 33px" id="mergepannel-props-padding-right" type="text"/>
								下<input style="width: 33px" id="mergepannel-props-padding-bottom" type="text"/>
								左<input style="width: 33px" id="mergepannel-props-padding-left" type="text"/>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
							
							<dl>
								<dt style="width:80px;display:block;"><h3>附加样式:</h3></dt>
								<dd>
								<textarea id="mergepannel-props-style" style="width:260px;height:150px;margin-left:5px;"></textarea>
								</dd>
								<dd style="clear:both;"></dd>
							</dl>
						</div>
				</div>
				</div>
			</div>
			<!-- frame/view 结构树 -->
			<div id='mergepannel-layout-struct'>
				<div>
					<h1 id='mergepannel-layout-struct-title'>视图布局结构</h1>
					<hr />
				</div>
				<div id='view_select_dom'>
				</div>
				<ul id="mergepannel-viewtree" class="ztree"></ul>
			</div>
		</div>
		<div id="mergepannel-layout-action">
		
			<div style="float:left">
				<select id="mergepannel-layout-saveType">
					<option value="type">对同类网页生效</option>
					<option value="current">仅当前网页生效</option>
					<option value="special">指定条件(高级)</option>
				</select>
				<input type="text" id='mergepannel-layout-save-parmas' style="display:none;width:400px;"/>
			</div>
			
			<div style="float:right">
				<span id="mergepannel-layout-msgqueue"></span>
				<button id="mergepannel-layout-savebtn">
					保存
				</button>
				<button id="mergepannel-layout-cleanbtn">
					清理
				</button>
			</div>
			
			<div style="clear:both"></div>
			
		</div>
	</div>
	<!-- tab页面其他的内容会动态添加在这里 -->
	<div id="mergepannel-controllermerger" class='mvcmerger_pages'>
	
	</div>
	<div id="mergepannel-log" class='mvcmerger_pages' style="display:none">
		<div id="mergepannel-log-output" style="overflow: scroll;"></div>
		<div>
			<label>
				<input type="checkbox" id="mergepannel-log-enable" />
				激活
			</label>
			<button onclick="jquery('#mergepannel-log-output').text('')">清空</button>
			<button onclick="window.clipboardData.setData('text',jquery('#mergepannel-log-output').html()); ">
				复制
			</button>
			|
			<button onclick="MergerPannel.instance.layout.updateLayout()">
				dbg:重算
			</button>
		</div>
	</div>
</div>

<script>
// 初始化 mvc merger pannel
var sMvcMergerPublicFolderUrl = '{=$sImageFolder}' ;
var sMvcMergerController = '{=$sControllerClass}' ;
var bMvcMergerLog = {=$log? 'true': 'false'} ;
var mapMVCMergerItemProperties = {=$arrLayoutProperties} ;

jquery(document).ready(function(){
	MergerPannel.instance = new MergerPannel() ;
	MergerPannel.instance.init() ;
	
	//颜色选择器
	if(jquery('#mergepannel-props-background-color').val() != ''){
		jquery('#mergepannel-props-background-color').css('background-color' , jquery('#mergepannel-props-background-color').val());
	}
	
	jquery('#mergepannel-props-background-color').change(function(){
		if(jquery(this).val() == ''){
			jquery(this).css('background-color' ,'');
		}
	});
	
	jquery('#mergepannel-props-color-selecter').farbtastic(function(color){
		jquery('#mergepannel-props-background-color').val(color).css('background-color' , color);
	});
	
	jquery('#mergepannel-props-background-color').focusin(function(){
		jquery('#mergepannel-props-color-selecter')
		.css({
			'top':jquery(this).position().top - 200,
			'left':0
		})
		.show();
	});
	jquery('#mergepannel-props-background-color').focusout(function(){
		jquery('#mergepannel-props-color-selecter').hide();
	});
}) ;
</script>