<lib name="jquery.ui" />
<lib name="jquery.ztree" />
<lib name="jquery.tip" />
<lib name='jquery.json'/>
<lib name='ckeditor'/>

<script src="mvc-merger:js/fselecter.js" />
<script src="mvc-merger:js/jquery.wijmo-open.all.2.1.4.min.js" />
<script src="mvc-merger:js/jquery.base64.js" />
<script src="mvc-merger:js/merge-pannel.js" />
<script src="mvc-merger:js/merge-pannel-layout.js" />
<script src="mvc-merger:js/setPageLayout.js" />
<script src="mvc-merger:js/colorPicker.js" />

<css src="mvc-merger:css/merge-pannel.css" />
<css src="mvc-merger:css/jquery.wijmo-open.2.1.4.css" />
<css src="mvc-merger:css/box.css" />

<!-- /*凤巢默认样式 */
background:url(../images/viewbg.jpg) repeat-x 0 0; margin:0 10px 15px; padding:10px; border:1px solid #dfdfdf; border-radius:2px; box-shadow:0 0 4px rgba(0,0,0,0.1)} -->
<script>
__arrSkins = {=$__arrSkins};

// 版式数据
// dire : 方向，horizontal是水平，vertical是垂直
var pageLayoutData={
	'bj2':{
		'title':'bj2',
		'image':'{/mvc-merger:image/bj2.png}',
		'dire':'horizontal',
		'subframes':[
			{
				'dire':'vertical',
				'layout':{
					'width':350,
				},
				'skin':'蜂巢默认皮肤',
			},
			{
				'dire':'vertical',
			},
		],
	},
	'bj2_2':{
		'title':'bj2_2',
		'image':'{/mvc-merger:image/bj2_2.png}',
		'dire':'horizontal',
		'subframes':[
			{
				'dire':'vertical',
			},
			{
				'dire':'vertical',
				'layout':{
					'width':350,
				},
				'skin':'蜂巢默认皮肤',
			},
		],
	},
	'bj3':{
		'title':'bj3',
		'image':'{/mvc-merger:image/bj3.png}',
		'dire':'horizontal',
		'subframes':[
			{
				'dire':'vertical',
				'layout':{
					'width':200,
				},
				'skin':'蜂巢默认皮肤',
			},
			{
				'dire':'vertical',
			},
			{
				'dire':'vertical',
				'layout':{
					'width':200,
				},
				'skin':'蜂巢默认皮肤',
			},
		],
	},
	'bj4':{
		'title':'bj4',
		'image':'{/mvc-merger:image/bj4.png}',
		'dire':'horizontal',
		'subframes':[
			{
				'dire':'vertical',
				'subframes':[
					{
						'skin':'蜂巢默认皮肤',
					},
					{
						'skin':'蜂巢默认皮肤',
					}
				]
			},
			{
				'dire':'vertical',
				'subframes':[
					{
						'skin':'蜂巢默认皮肤',
					},
					{
						'skin':'蜂巢默认皮肤',
					}
				]
			},
		],
	},
	'bjnew':{
		'title':'bjnew',
		'image':'{/mvc-merger:image/bjnew.png}',
		'dire':'vertical',
		'subframes':[
			// 1
			{
				'dire':'horizontal',
				'subframes':[
					// 1.1
					{
						'nmax':1
					},
					// 1.2
					{
						'dire':'vertical',
						'nmax':2,
						'layout':{
							'width':291,
						},
						'skin':'蜂巢默认皮肤',
					},
				],
			},
			// 2
			{
				'nmax':1,
			},
			// 3
			{
				'dire':'horizontal',
				'subframes':[
					// 3.1
					{
						'nmax':1
					},
					// 3.2
					{
						'dire':'vertical',
						'nmax':2,
						'layout':{
							'width':291,
						},
						'skin':'蜂巢默认皮肤',
					},
				],
			},
			// 4
			{
				'nmax':1,
			},
			// 5
			{
				'dire':'horizontal',
				'subframes':[
					// 5.1
					{
						'dire':'vertical',
						'skin':'蜂巢默认皮肤',
					},
					// 5.2
					{
						'dire':'vertical',
					},
				],
			}
		],
	}
};
</script>

<div id='mergepannel-dialog'>
	<span id="mergepannel-layout-msgqueue"></span>
	<div id='mergepannel-layout' class="mvcmerger_pages">
	<!--板式皮肤选择-->
		<div class="box_bj_top">
			<div class="box_bj_top_tab">
				<p tab="frame_selecter">板式选择</p>
				<p  class="box_tab_v"  tab="skin_selecter">皮肤选择</p>
				
				<span class="box_button_left">
					<a href="#" id="skin_import_btn" class="box_button_right">导入皮肤</a>
				</span>

				<span class="box_button_left">
					<a href="#" id="skin_no_btn" class="box_button_right">取消皮肤</a>
				</span>
				
			</div>
			<div id="frame_container">
				<div id="frame_selecter" class="box_frame hide">
					<div class="box_top_left" to="left">
						<a href="#" title="上一个"></a>
					</div>
					<div class="frame_selecter_item_container">
						<div class="box_frame_img ">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>1</span>
						</div>
						<div class="box_frame_img ">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>2</span>
						</div>
						<div class="box_frame_img">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>3</span>
						</div>
						<div class="box_frame_img">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>4</span>
						</div>
						<div class="box_frame_img">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>5</span>
						</div>
						<div class="box_frame_img">
							<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
							<span>6</span>
						</div>
						<div class="clr"></div>
					</div>
					<div class="box_top_right" to="right">
						<a href="#" title="下一个"></a>
					</div>
					<div class="clr"></div>
				</div>
			
				<div id="skin_selecter" class="box_frame">
					<div class="box_top_left" to="left">
						<a href="#" title="上一个"></a>
					</div>
					<div class="frame_selecter_item_container">
							
							<div id="cusSkin" class="box_frame_img box_frame_img_v">
								<a href="#" title="#"><img src='{/mvc-merger:image/frame1.png}' alt="#" /></a>
								<span class="box_frame_skinName">自定义</span>
							</div>
						<if "$arrSkins !== array()">
						<foreach for="$arrSkins" key="sSkinName" item="arrSkin">
							<div class="box_frame_img">
								<a href="#" title="#">
									<div class="box_frame_skin_show">
										<div class="box_frame_skin_show_div"></div>
									</div>
								</a>
								<span class="box_frame_skinName">{=$sSkinName}</span>
								<strong><a class="box_frame_deleteSkin" href="#" title="删除皮肤"></a></strong>
								<p><a class="export_skins_btn" href="#" title="导出皮肤"></a></p>
							</div>
						</foreach>
						</if>
						<div class="clr"></div>
					</div>
					<div class="box_top_right" to="right">
						<a href="#" title="下一个"></a>
					</div>
					<div class="clr"></div>
				</div>
			</div>
			
			<div class="box_frameskin_foot">
				<a id="box_frameskin_foot_btn" href="#" title="#"></a>
			</div>
		</div>
		
		<div class="box_bj_all">
		<!--左侧-->
			<div class="box_bj_left">
				<div class="box_bj_left_button">
					<span  id="view_select_dom" class="box_button_left">
						<strong class="box_ico_firebug"></strong>
						<a href="#" class="box_button_right">点击查看页面元素</a>
					</span>
				</div>
				<ul id="mergepannel-viewtree" class="ztree"></ul>
			</div>
			
		<!--右侧-->
			<div class="box_bj_right">
				<div class="box_bj_right_top">
					<div class="box_bj_right_top_left">
						<span class="box_ico_mk"></span><span>国际 opencms_TopList_html</span>
					</div>
					<div class="box_bj_right_top_right">
						<span class="box_button_left" style=" float:right; margin-right:5px">
							<a href="#" id="mergepannel-props-clean" class="box_button_right">清除样式</a>
						</span>
						<span class="box_button_left" style=" float:right; margin-right:5px">
							<a href="#" id="mergepannel-props-ad-btn" class="box_button_right">高级</a>
						</span>
					</div>
				</div>
				
				<div class="box_bj_right_footer">
					<div class="box_bj_right_addframe">
						<a href="#" title="增加一个下级布局框架" class="addframe mergepannel-tippalbe-element" id="mergepannel-props-frame-new-btn">添加框架</a>
						<button id="mergepannel-props-frame-delete-btn" class="mergepannel-tippalbe-element" title='删除布局框架,只有客户创建的布局框架才能删除'>删</button>
						<button id="mergepannel-props-frame-center-btn" class="mergepannel-tippalbe-element" title='让下级成员居中'>居中</button>
						<label><input id="mergepannel-props-frame-v" class="mergepannel-props-frame-type" name='mergepannel-props-frame-type' type="radio" value="v" />纵向</label>
						<label><input id="mergepannel-props-frame-h" class="mergepannel-props-frame-type" name='mergepannel-props-frame-type' type="radio" value="h" />横向</label>
						<label><input id="mergepannel-props-frame-s" class="mergepannel-props-frame-type"name='mergepannel-props-frame-type' type="radio" value="s" disabled />切换页</label>
						<label  class="mergepannel-tippalbe-element" title='把这个容器变成可填充容器,里面的子元素自动填充这个容器的空闲高度'><input id="mergepannel-frame-autoFill"  type="checkbox"/><span>自动高度</span></label>
					</div>
					<div id="mergepannel-props-common" class="box_bj_right_skin">

						<div>
							<p>宽高</p>
							<span>
							<input class="mergepannel-tippalbe-element box_input1" id="mergepannel-props-width" style="width: 50px" title="设置视图或布局框架的宽度,可以使用百分比或单位,默认的单位是px" value="" />	<input value="" style="width: 50px" id="mergepannel-props-height" class="mergepannel-tippalbe-element box_input2" title="设置视图或布局框架的高度,可以使用百分比或单位,默认的单位是px"  />
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>背景</p>
							<span>
							<input style="width: 55px" id="mergepannel-props-background-color" class="box_input3" colorSelecter="1"/>
							<div class="mergepannel-props-color-selecter"></div>
							<input style="width: 80px" id="mergepannel-props-background-image" class="box_input4" />
							<input style="width: 50px" id="mergepannel-props-background-position" class="box_input5" />
							<select id="mergepannel-props-background-repeat">
								<option value='no-repeat'>不重复</option>
								<option value='repeat'>重复</option>
								<option value='repeat-x'>横向重复</option>
								<option value='repeat-y'>纵向重复</option>
							</select>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p> </p>
							<span>
								<label><input type="checkbox"  id='mergepannel-props-display-checkbox' />隐藏</label>
								<select id='mergepannel-props-display' style="display:none">
									<option value="block">显示框架</option>
									<option value="none">隐藏框架</option>
								</select>
								<strong class="box_info"></strong>
							</span>
							<div class="clr"></div>
						</div>

						<!--  高级模式  -->
						<div class="mergepannel-props-ad">
						<div>
							<p>定位</p>
							<span>
								<select id="mergepannel-props-position">
									<option value="static">正常</option>
									<option value="relative">相对</option>
									<option value="absolute">绝对</option>
									<option value="fixed">窗口绝对</option>
								</select>
								<input style="width: 70px" class="box_input6" id="mergepannel-props-zindex" type="text"/>
								<input style="width: 28px" class="box_input7" id="mergepannel-props-top" type="text"/>
								<input style="width: 28px" class="box_input8" id="mergepannel-props-left" type="text"/>
								<input style="width: 28px" class="box_input9" id="mergepannel-props-bottom" type="text"/>
								<input style="width: 28px" class="box_input10" id="mergepannel-props-right" type="text"/>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>边框</p>
							<span>
								
										<input style="width: 50px" class="mergepannel-border box_input11" id="mergepannel-props-border-color" colorSelecter="1" type="text"/>
										<div class="mergepannel-props-color-selecter"></div>
										<input style="width: 50px" class="mergepannel-border box_input12" id="mergepannel-props-border-width" type="text"/>
										<select id="mergepannel-props-border-style" class="mergepannel-border" style='width:80px;display:inline;'>
											<option value="none">无</option>
											<option value="solid">实线</option>
											<option value="dotted">点状</option>
											<option value="dashed">虚线</option>
											<option value="double">双线</option>
											<option value="groove">3D 凹槽</option>
											<option value="ridge">3D 垄状</option>
											<option value="inset">3D 内部</option>
											<option value="outset">3D 外部</option>
										</select>
										<strong class="box_button_left" style=" width:70px; display:inline-block; font-weight:normal">
												<a id="mergepannel-props-borders-showmore" href="#" title="详细设定" class="box_button_right" style="width:auto; padding-left:0">展开</a>
										</strong>
							</span>
										
							<div class="clr"></div>
						</div>
						<div id='mergepannel-props-borders' style="position: relative;z-index:40000" >
						<div>
							<p>&nbsp;</p>
							<span>
							<h6>上</h6>
											<input style="width: 50px" class="mergepannel-border box_input11" id="mergepannel-props-border-top-color" colorSelecter="1" type="text"/>
												<div class="mergepannel-props-color-selecter"></div>
											<input style="width: 50px" class="mergepannel-border box_input12" id="mergepannel-props-border-top-width" type="text"/>
											<select id="mergepannel-props-border-top-style" class="mergepannel-border" style='width:80px;'>
												<option value="none">无</option>
												<option value="solid">实线</option>
												<option value="dotted">点状</option>
												<option value="dashed">虚线</option>
												<option value="double">双线</option>
												<option value="groove">3D 凹槽</option>
												<option value="ridge">3D 垄状</option>
												<option value="inset">3D 内部</option>
												<option value="outset">3D 外部</option>
											</select>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>&nbsp;</p>
							<span>
								<h6>右</h6>
											<input style="width: 50px" class="mergepannel-border box_input11" id="mergepannel-props-border-right-color" colorSelecter="1" type="text"/>
											<div class="mergepannel-props-color-selecter"></div>
											<input style="width: 50px" class="mergepannel-border box_input12" id="mergepannel-props-border-right-width" type="text"/>
											<select id="mergepannel-props-border-right-style" class="mergepannel-border" style='width:80px;'>
												<option value="none">无</option>
												<option value="solid">实线</option>
												<option value="dotted">点状</option>
												<option value="dashed">虚线</option>
												<option value="double">双线</option>
												<option value="groove">3D 凹槽</option>
												<option value="ridge">3D 垄状</option>
												<option value="inset">3D 内部</option>
												<option value="outset">3D 外部</option>
											</select>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>&nbsp;</p>
							<span>
								<h6>下</h6>
											<input style="width: 50px" class="mergepannel-border box_input11" id="mergepannel-props-border-bottom-color" colorSelecter="1" type="text"/>
											<div class="mergepannel-props-color-selecter"></div>
											<input style="width: 50px" class="mergepannel-border box_input12" id="mergepannel-props-border-bottom-width" type="text"/>
											<select id="mergepannel-props-border-bottom-style" class="mergepannel-border" style='width:80px;'>
												<option value="none">无</option>
												<option value="solid">实线</option>
												<option value="dotted">点状</option>
												<option value="dashed">虚线</option>
												<option value="double">双线</option>
												<option value="groove">3D 凹槽</option>
												<option value="ridge">3D 垄状</option>
												<option value="inset">3D 内部</option>
												<option value="outset">3D 外部</option>
											</select>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>&nbsp;</p>
							<span>
								<h6>左</h6>
											<input style="width: 50px" id="mergepannel-props-border-left-color" class="mergepannel-border box_input11" colorSelecter="1" type="text"/>
											<div class="mergepannel-props-color-selecter"></div>
											<input style="width: 50px" id="mergepannel-props-border-left-width" class="mergepannel-border box_input12" type="text"/>
											<select id="mergepannel-props-border-left-style" style='width:80px;'  class="mergepannel-border">
												<option value="none">无</option>
												<option value="solid">实线</option>
												<option value="dotted">点状</option>
												<option value="dashed">虚线</option>
												<option value="double">双线</option>
												<option value="groove">3D 凹槽</option>
												<option value="ridge">3D 垄状</option>
												<option value="inset">3D 内部</option>
												<option value="outset">3D 外部</option>
											</select>
							</span>
							<div class="clr"></div>
						</div>
						</div>
						<div>
							<p>外边距</p>
							<span>
								<input style="width: 33px" id="mergepannel-props-margin-top" class="box_input7" type="text"/>
								<input style="width: 33px" id="mergepannel-props-margin-right" class="box_input8" type="text"/>
								<input style="width: 33px" id="mergepannel-props-margin-bottom" class="box_input9" type="text"/>
								<input style="width: 33px" id="mergepannel-props-margin-left" class="box_input10" type="text"/>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>内边距</p>
							<span>
								<input style="width: 33px" id="mergepannel-props-padding-top" class="box_input7" type="text"/>
								<input style="width: 33px" id="mergepannel-props-padding-right" class="box_input8" type="text"/>
								<input style="width: 33px" id="mergepannel-props-padding-bottom" class="box_input9" type="text"/>
								<input style="width: 33px" id="mergepannel-props-padding-left" class="box_input10" type="text"/>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p>CSS</p>
							<span>
								<textarea id="mergepannel-props-style" style="width:260px;height:100px; border:#c4c5ca 1px solid;" class="box_input13"></textarea>
							</span>
							<div class="clr"></div>
						</div>
						<div>
							<p> </p>
							<span>
							<input id="mergepannel-props-skin" type="hidden"/>
							<button id="mergepannel-layout-saveToSkinBtn" title="将当前样式保存成皮肤">保存皮肤</button>
							<div id="mergepannel-skin-msgqueue" ></div>
							</span>
							<div class="clr"></div>
						</div>
						<div class="clr"></div>
					</div>
				</div>
				
			</div>
			
		</div>
		</div>
	
	
		<!--底部-->
		<div class="clr"></div>
		<div class="box_bj_footer">
			<div class="box_bj_footer_left">
				<select id="mergepannel-layout-saveType">
					<option value="type">对同类网页生效</option>
					<option value="current">仅当前网页生效</option>
					<option value="special">指定条件(高级)</option>
				</select>
				<input type="text" id='mergepannel-layout-save-parmas' style="display:none;width:200px;"/>
			</div>
			<div class="box_bj_footer_right">
				<button id="mergepannel-layout-savebtn">保存</button>
				<button id="mergepannel-layout-cleanbtn" title="清理本页面所有样式">清理</button>
			</div>
			
		</div>
		
	</div>
	
	
	<!-- tab页面其他的内容会动态添加在这里 -->
	<div id="mergepannel-controllermerger" class='mvcmerger_pages'>
	
	</div>
	
</div>

<div class="body_top">
	<div class="body_top_menu">
		<a href="#" title="视图布局" class="body_top_bj" tab="mergepannel-layout">视图布局</a>
		<a href="#" title="添加视图" class="body_top_st" tab="mergepannel-controllermerger">添加视图</a>
		<a href="#" title="模板编织" class="body_top_bz" tab="ub_dialog">模板编织</a>
		<a href="#" id="body_top_pin_exit" title="退出编辑" class="body_top_out">&nbsp;</a>
		<a href="#" title="导航锁定" class="body_top_pin body_top_pin_selected">&nbsp;</a>
		<a href="#" title="导航悬浮" class="body_top_pinnow">&nbsp;</a>
	</div>
</div>
<div class="body_top_down">
	<p></p>
</div>

<div id="skin_export_box" class="box_export">
	<div class="box_exportimport_title">导出皮肤样式</div>
	<div class="box_exportimport_closs"></div>
	<div class="box_export_info">
		<textarea name="" cols="" rows=""></textarea>
	</div>
	<div class="box_export_text"><span></span>请将上方代码复制到本地保存</div>
</div>
<div id="skin_import_box" class="box_import">
	<div class="box_exportimport_title">导入皮肤样式</div>
	<div class="box_exportimport_closs"></div>
	<div class="box_import_info">
		<textarea name="" cols="" rows=""></textarea>
	</div>
	<div class="clr"></div>
	<div class="box_import_text"><span></span>请将皮肤样式粘贴在上方输入框中</div>
	<div id="box_import_message"></div>
	<div class="box_import_button">
		<button id="skin_import_save_btn" class="box_import_button_skin">导入皮肤</button>
	</div>
</div>

<script>
// 初始化 mvc merger pannel
var sMvcMergerPublicFolderUrl = '{=$sImageFolder}' ;
var sMvcMergerController = '{=$sControllerClass}' ;
var bMvcMergerLog = {=$log? 'true': 'false'} ;
var mapMVCMergerItemProperties = {=$arrLayoutProperties} ;

jquery(document).ready(function(){
	MergerPannel.instance = new MergerPannel() ;
	MergerPannel.instance.init() ;
	
	
}) ;
</script>
